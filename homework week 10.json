{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "width": 900,
  "height": 520,
  "title": {
    "text": "Australian Wildfires (NASA FIRMS), 2019",
    "subtitle": "Size = FRP (MW), Colour = Brightness (K) â€” use slider to filter by FRP intensity",
    "anchor": "start"
  },

  "projection": {"type": "equalEarth"},

  "params": [
    {
      "name": "FRP",
      "value": 0,
      "bind": {"input": "range", "min": 0, "max": 500, "step": 5}
    }
  ],

  "layer": [
    {
      "data": {
        "url": "https://raw.githubusercontent.com/hoanggiaphat-monash/Gia-Phat-Hoang/refs/heads/main/ne_110m%20(6).json",
        "format": {"type": "topojson", "feature": "ne_110m_admin_0_countries"}
      },
      "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "white"}
    },

    {
      "data": {
        "url": "https://raw.githubusercontent.com/hoanggiaphat-monash/Gia-Phat-Hoang/2d44985f5cdf6a3db01eb50d121081e4faf0fcc7/fire_archive_M6_96619.csv",
        "format": {"type": "csv"}
      },
      "transform": [
        {"calculate": "toNumber(datum.longitude)", "as": "lon"},
        {"calculate": "toNumber(datum.latitude)", "as": "lat"},
        {"calculate": "toNumber(datum.brightness)", "as": "bright"},
        {"calculate": "toNumber(datum.frp)", "as": "frp_num"},
        {"calculate": "year(toDate(datum.acq_date))", "as": "year_num"},
        {"filter": "datum.year_num == 2019"},
        {"filter": "datum.lon >= 112 && datum.lon <= 154 && datum.lat >= -44 && datum.lat <= -10"},
        {"filter": "isFinite(datum.lon) && isFinite(datum.lat) && isFinite(datum.frp_num) && isFinite(datum.bright)"},
        {"filter": "datum.frp_num >= FRP"}
      ],
      "mark": {"type": "circle", "opacity": 0.8},
      "encoding": {
        "longitude": {"field": "lon", "type": "quantitative"},
        "latitude": {"field": "lat", "type": "quantitative"},
        "size": {
          "field": "frp_num",
          "type": "quantitative",
          "title": "FRP (MW)",
          "scale": {"type": "sqrt", "range": [8, 200]}
        },
        "color": {
          "field": "bright",
          "type": "quantitative",
          "title": "Brightness (K)",
          "scale": {"scheme": "orangered"}
        },
        "tooltip": [
          {"field": "acq_date", "type": "temporal", "title": "Acquired"},
          {"field": "frp_num", "type": "quantitative", "title": "FRP (MW)"},
          {"field": "bright", "type": "quantitative", "title": "Brightness (K)"},
          {"field": "confidence", "type": "nominal", "title": "Confidence"},
          {"field": "lat", "type": "quantitative", "title": "Lat"},
          {"field": "lon", "type": "quantitative", "title": "Lon"}
        ]
      }
    }
  ]
}


